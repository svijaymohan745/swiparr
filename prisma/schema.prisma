generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
  // Outputting to src/generated ensures Next.js bundles it correctly
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

// --- SWIPARR MODELS ---

model Session {
  id         String   @id @default(uuid())
  code       String   @unique
  hostUserId String
  createdAt  DateTime @default(now())
  likes      Like[]
}

model Like {
  id             Int      @id @default(autoincrement())
  jellyfinItemId String   
  jellyfinUserId String
  isMatch        Boolean  @default(false)
  
  sessionCode    String?
  session        Session? @relation(fields: [sessionCode], references: [code])

  createdAt      DateTime @default(now())
  
  // Prevent duplicate likes
  @@unique([jellyfinItemId, jellyfinUserId])
}

model Hidden {
  id             Int      @id @default(autoincrement())
  jellyfinItemId String
  jellyfinUserId String

  @@unique([jellyfinItemId, jellyfinUserId])
}